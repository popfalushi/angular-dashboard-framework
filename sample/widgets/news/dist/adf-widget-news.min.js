!function(){"use strict";function e(e){e.widget("news",{title:"News",description:"Displays a RSS/Atom feed",category:"News",templateUrl:"{widgetsPath}/news/src/view.html",controller:"NewsController",controllerAs:"vm",config:{num:5,showTitle:!0,showDescription:!0},resolve:{feed:["NewsService","config",function(e,t){return t.url?e.get(t):void 0}]},edit:{templateUrl:"{widgetsPath}/news/src/edit.html"}})}function t(e,t,n){function i(e){return e.num||(e.num=5),n+encodeURIComponent(e.url)+"&num="+e.num}function o(n){var o=e.defer();return t.jsonp(i(n)).success(function(e){e&&e.responseData&&e.responseData.feed?o.resolve(e.responseData.feed):o.reject("feed does not contain responseData element")}).error(function(e){o.reject(e)}),o.promise}return{get:o}}function n(){return function(e){return new Date(e)}}function i(e){this.feed=e}angular.module("adf.widget.news",["adf.provider"]).value("newsServiceUrl","https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=JSON_CALLBACK&q=").config(e),e.$inject=["dashboardProvider"],angular.module("adf.widget.news").run(["$templateCache",function(e){e.put("{widgetsPath}/news/src/edit.html",'<form role=form><div class=form-group><label for=url>Feed url</label> <input type=url class=form-control id=url ng-model=config.url placeholder="Enter feed url"></div><div class=form-group><label for=num>Number of Entries</label> <input type=number class=form-control id=num ng-model=config.num></div><div class=form-group><label for=showTitle>Show Feed Title</label> <input type=checkbox class=form-control id=showTitle ng-model=config.showTitle></div><div class=form-group><label for=showTitle>Show Feed Description</label> <input type=checkbox class=form-control id=showDescription ng-model=config.showDescription></div></form>'),e.put("{widgetsPath}/news/src/view.html",'<div class=news><div class="alert alert-info" ng-if=!vm.feed>Please insert a feed url in the widget configuration</div><div ng-if=vm.feed><h3 ng-if=config.showTitle><a ng-href={{vm.feed.link}} target=_blank>{{vm.feed.title}}</a></h3><p ng-if=config.showDescription>{{vm.feed.description}}</p><div class=media ng-repeat="entry in vm.feed.entries"><div class=media-body><h4 class=media-heading><a ng-href={{entry.link}} target=_blank>{{entry.title}}</a></h4><p>{{entry.contentSnippet}}</p><small>{{entry.author}}, {{entry.publishedDate | toDate | date: \'yyyy-MM-dd HH:mm\'}}</small></div></div></div></div>')}]),angular.module("adf.widget.news").service("NewsService",t),t.$inject=["$q","$http","newsServiceUrl"],angular.module("adf.widget.news").filter("toDate",n),angular.module("adf.widget.news").controller("NewsController",i),i.$inject=["feed","config"]}(window);